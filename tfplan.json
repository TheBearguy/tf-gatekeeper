{"format_version":"1.2","terraform_version":"1.14.4","variables":{"aws_region":{"value":"ap-south-1"},"project_name":{"value":"0.0.9"},"schema_version":{"value":"0.0.9"}},"planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.athena.aws_athena_workgroup.this","mode":"managed","type":"aws_athena_workgroup","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"configuration":[{"bytes_scanned_cutoff_per_query":null,"enforce_workgroup_configuration":true,"engine_version":[],"execution_role":null,"publish_cloudwatch_metrics_enabled":true,"requester_pays_enabled":false,"result_configuration":[{"acl_configuration":[],"encryption_configuration":[],"expected_bucket_owner":null,"output_location":"s3://0.0.9-athena-results/results/"}]}],"description":null,"force_destroy":false,"name":"0.0.9_wg","state":"ENABLED","tags":null},"sensitive_values":{"configuration":[{"engine_version":[],"result_configuration":[{"acl_configuration":[],"encryption_configuration":[]}]}],"tags_all":{}}}],"address":"module.athena"},{"resources":[{"address":"module.athena_results_bucket.aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"0.0.9-athena-results","force_destroy":true,"tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"module.athena_results_bucket.aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"module.athena_results_bucket.aws_s3_bucket_server_side_encryption_configuration.this","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"module.athena_results_bucket.aws_s3_bucket_versioning.this","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Suspended"}]},"sensitive_values":{"versioning_configuration":[{}]}}],"address":"module.athena_results_bucket"},{"resources":[{"address":"module.curated_bucket.aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"0.0.9-curated","force_destroy":true,"tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"module.curated_bucket.aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"module.curated_bucket.aws_s3_bucket_server_side_encryption_configuration.this","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"module.curated_bucket.aws_s3_bucket_versioning.this","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Suspended"}]},"sensitive_values":{"versioning_configuration":[{}]}}],"address":"module.curated_bucket"},{"resources":[{"address":"module.etl_lambda.aws_cloudwatch_log_group.this","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/aws/lambda/0.0.9-etl","retention_in_days":14,"skip_destroy":false,"tags":null},"sensitive_values":{"tags_all":{}}}],"address":"module.etl_lambda"},{"resources":[{"address":"module.glue_catalog.aws_glue_catalog_database.this","mode":"managed","type":"aws_glue_catalog_database","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"federated_database":[],"name":"0.0.9_db","parameters":null,"tags":null,"target_database":[]},"sensitive_values":{"create_table_default_permission":[],"federated_database":[],"tags_all":{},"target_database":[]}},{"address":"module.glue_catalog.aws_glue_crawler.this","mode":"managed","type":"aws_glue_crawler","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"catalog_target":[],"classifiers":null,"configuration":null,"database_name":"0.0.9_db","delta_target":[],"description":null,"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"name":"0.0.9_crawler","recrawl_policy":[{"recrawl_behavior":"CRAWL_EVERYTHING"}],"s3_target":[{"connection_name":null,"dlq_event_queue_arn":null,"event_queue_arn":null,"exclusions":null,"path":"s3://0.0.9-curated/dataset/schema=0.0.9/","sample_size":null}],"schedule":null,"schema_change_policy":[{"delete_behavior":"LOG","update_behavior":"LOG"}],"security_configuration":null,"table_prefix":"dataset_","tags":null},"sensitive_values":{"catalog_target":[],"delta_target":[],"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"recrawl_policy":[{}],"s3_target":[{}],"schema_change_policy":[{}],"tags_all":{}}}],"address":"module.glue_catalog"},{"resources":[{"address":"module.iam.aws_iam_policy.athena_policy","mode":"managed","type":"aws_iam_policy","name":"athena_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"athena-query-policy","path":"/","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.iam.aws_iam_policy.glue_policy","mode":"managed","type":"aws_iam_policy","name":"glue_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"glue-crawler-policy","path":"/","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.iam.aws_iam_policy.lambda_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"etl-lambda-policy","path":"/","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.iam.aws_iam_role.athena_role","mode":"managed","type":"aws_iam_role","name":"athena_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"athena.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"athena-query-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.iam.aws_iam_role.glue_role","mode":"managed","type":"aws_iam_role","name":"glue_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"glue.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"glue-crawler-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.iam.aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"etl-lambda-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.iam.aws_iam_role_policy_attachment.athena_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"athena_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"athena-query-role"},"sensitive_values":{}},{"address":"module.iam.aws_iam_role_policy_attachment.glue_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"glue_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"glue-crawler-role"},"sensitive_values":{}},{"address":"module.iam.aws_iam_role_policy_attachment.lambda_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"etl-lambda-role"},"sensitive_values":{}}],"address":"module.iam"},{"resources":[{"address":"module.raw_bucket.aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"0.0.9-raw","force_destroy":true,"tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"module.raw_bucket.aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"module.raw_bucket.aws_s3_bucket_server_side_encryption_configuration.this","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"module.raw_bucket.aws_s3_bucket_versioning.this","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}}],"address":"module.raw_bucket"}]}},"resource_changes":[{"address":"module.athena.aws_athena_workgroup.this","module_address":"module.athena","mode":"managed","type":"aws_athena_workgroup","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"configuration":[{"bytes_scanned_cutoff_per_query":null,"enforce_workgroup_configuration":true,"engine_version":[],"execution_role":null,"publish_cloudwatch_metrics_enabled":true,"requester_pays_enabled":false,"result_configuration":[{"acl_configuration":[],"encryption_configuration":[],"expected_bucket_owner":null,"output_location":"s3://0.0.9-athena-results/results/"}]}],"description":null,"force_destroy":false,"name":"0.0.9_wg","state":"ENABLED","tags":null},"after_unknown":{"arn":true,"configuration":[{"engine_version":[],"result_configuration":[{"acl_configuration":[],"encryption_configuration":[]}]}],"id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"configuration":[{"engine_version":[],"result_configuration":[{"acl_configuration":[],"encryption_configuration":[]}]}],"tags_all":{}}}},{"address":"module.athena_results_bucket.aws_s3_bucket.this","module_address":"module.athena_results_bucket","mode":"managed","type":"aws_s3_bucket","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"0.0.9-athena-results","force_destroy":true,"tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.athena_results_bucket.aws_s3_bucket_public_access_block.this","module_address":"module.athena_results_bucket","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.athena_results_bucket.aws_s3_bucket_server_side_encryption_configuration.this","module_address":"module.athena_results_bucket","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"module.athena_results_bucket.aws_s3_bucket_versioning.this","module_address":"module.athena_results_bucket","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Suspended"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"module.curated_bucket.aws_s3_bucket.this","module_address":"module.curated_bucket","mode":"managed","type":"aws_s3_bucket","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"0.0.9-curated","force_destroy":true,"tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.curated_bucket.aws_s3_bucket_public_access_block.this","module_address":"module.curated_bucket","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.curated_bucket.aws_s3_bucket_server_side_encryption_configuration.this","module_address":"module.curated_bucket","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"module.curated_bucket.aws_s3_bucket_versioning.this","module_address":"module.curated_bucket","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Suspended"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"module.etl_lambda.aws_cloudwatch_log_group.this","module_address":"module.etl_lambda","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/aws/lambda/0.0.9-etl","retention_in_days":14,"skip_destroy":false,"tags":null},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.glue_catalog.aws_glue_catalog_database.this","module_address":"module.glue_catalog","mode":"managed","type":"aws_glue_catalog_database","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"federated_database":[],"name":"0.0.9_db","parameters":null,"tags":null,"target_database":[]},"after_unknown":{"arn":true,"catalog_id":true,"create_table_default_permission":true,"federated_database":[],"id":true,"location_uri":true,"tags_all":true,"target_database":[]},"before_sensitive":false,"after_sensitive":{"create_table_default_permission":[],"federated_database":[],"tags_all":{},"target_database":[]}}},{"address":"module.glue_catalog.aws_glue_crawler.this","module_address":"module.glue_catalog","mode":"managed","type":"aws_glue_crawler","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"catalog_target":[],"classifiers":null,"configuration":null,"database_name":"0.0.9_db","delta_target":[],"description":null,"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"name":"0.0.9_crawler","recrawl_policy":[{"recrawl_behavior":"CRAWL_EVERYTHING"}],"s3_target":[{"connection_name":null,"dlq_event_queue_arn":null,"event_queue_arn":null,"exclusions":null,"path":"s3://0.0.9-curated/dataset/schema=0.0.9/","sample_size":null}],"schedule":null,"schema_change_policy":[{"delete_behavior":"LOG","update_behavior":"LOG"}],"security_configuration":null,"table_prefix":"dataset_","tags":null},"after_unknown":{"arn":true,"catalog_target":[],"delta_target":[],"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"id":true,"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"recrawl_policy":[{}],"role":true,"s3_target":[{}],"schema_change_policy":[{}],"tags_all":true},"before_sensitive":false,"after_sensitive":{"catalog_target":[],"delta_target":[],"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"recrawl_policy":[{}],"s3_target":[{}],"schema_change_policy":[{}],"tags_all":{}}}},{"address":"module.iam.aws_iam_policy.athena_policy","module_address":"module.iam","mode":"managed","type":"aws_iam_policy","name":"athena_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"athena-query-policy","path":"/","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.iam.aws_iam_policy.glue_policy","module_address":"module.iam","mode":"managed","type":"aws_iam_policy","name":"glue_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"glue-crawler-policy","path":"/","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.iam.aws_iam_policy.lambda_policy","module_address":"module.iam","mode":"managed","type":"aws_iam_policy","name":"lambda_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"etl-lambda-policy","path":"/","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.iam.aws_iam_role.athena_role","module_address":"module.iam","mode":"managed","type":"aws_iam_role","name":"athena_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"athena.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"athena-query-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.iam.aws_iam_role.glue_role","module_address":"module.iam","mode":"managed","type":"aws_iam_role","name":"glue_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"glue.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"glue-crawler-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.iam.aws_iam_role.lambda_role","module_address":"module.iam","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"etl-lambda-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.iam.aws_iam_role_policy_attachment.athena_attach","module_address":"module.iam","mode":"managed","type":"aws_iam_role_policy_attachment","name":"athena_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"athena-query-role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam.aws_iam_role_policy_attachment.glue_attach","module_address":"module.iam","mode":"managed","type":"aws_iam_role_policy_attachment","name":"glue_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"glue-crawler-role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam.aws_iam_role_policy_attachment.lambda_attach","module_address":"module.iam","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"etl-lambda-role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.raw_bucket.aws_s3_bucket.this","module_address":"module.raw_bucket","mode":"managed","type":"aws_s3_bucket","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"0.0.9-raw","force_destroy":true,"tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.raw_bucket.aws_s3_bucket_public_access_block.this","module_address":"module.raw_bucket","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.raw_bucket.aws_s3_bucket_server_side_encryption_configuration.this","module_address":"module.raw_bucket","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"module.raw_bucket.aws_s3_bucket_versioning.this","module_address":"module.raw_bucket","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}}],"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"region":{"references":["var.aws_region"]}}}},"root_module":{"resources":[{"address":"aws_lambda_permission.allow_raw_bucket","mode":"managed","type":"aws_lambda_permission","name":"allow_raw_bucket","provider_config_key":"aws","expressions":{"action":{"constant_value":"lambda:InvokeFunction"},"function_name":{"references":["module.etl_lambda.lambda_name","module.etl_lambda"]},"principal":{"constant_value":"s3.amazonaws.com"},"source_arn":{"references":["module.raw_bucket.bucket_arn","module.raw_bucket"]},"statement_id":{"constant_value":"AllowRawBucketInvoke"}},"schema_version":0},{"address":"aws_s3_bucket_notification.raw_to_lambda","mode":"managed","type":"aws_s3_bucket_notification","name":"raw_to_lambda","provider_config_key":"aws","expressions":{"bucket":{"references":["module.raw_bucket.bucket_name","module.raw_bucket"]},"lambda_function":[{"events":{"constant_value":["s3:ObjectCreated:*"]},"filter_prefix":{"constant_value":""},"filter_suffix":{"constant_value":".json"},"lambda_function_arn":{"references":["module.etl_lambda.lambda_arn","module.etl_lambda"]}}]},"schema_version":0,"depends_on":["aws_lambda_permission.allow_raw_bucket"]}],"module_calls":{"athena":{"source":"./etl_components/etl_athena","expressions":{"results_bucket_name":{"references":["module.athena_results_bucket.bucket_name","module.athena_results_bucket"]},"results_prefix":{"constant_value":"results/"},"workgroup_name":{"references":["var.project_name"]}},"module":{"outputs":{"workgroup_name":{"expression":{"references":["aws_athena_workgroup.this.name","aws_athena_workgroup.this"]}}},"resources":[{"address":"aws_athena_workgroup.this","mode":"managed","type":"aws_athena_workgroup","name":"this","provider_config_key":"aws","expressions":{"configuration":[{"bytes_scanned_cutoff_per_query":{"references":["var.bytes_scanned_cutoff_per_query"]},"enforce_workgroup_configuration":{"references":["var.enforce_workgroup_configuration"]},"result_configuration":[{"output_location":{"references":["var.results_bucket_name","var.results_prefix"]}}]}],"name":{"references":["var.workgroup_name"]}},"schema_version":0}],"variables":{"bytes_scanned_cutoff_per_query":{"default":null,"description":"Bytes scanned limit per query (null = no limit)"},"enforce_workgroup_configuration":{"default":true,"description":"Force queries to obey workgroup settings"},"results_bucket_name":{"description":"S3 bucket for Athena query results"},"results_prefix":{"description":"Prefix under the results bucket"},"workgroup_name":{"description":"Athena workgroup name"}}}},"athena_results_bucket":{"source":"./etl_components/etl_s3_bucket","expressions":{"bucket_name":{"references":["var.project_name"]},"bucket_type":{"constant_value":"athena-results"}},"module":{"outputs":{"bucket_arn":{"expression":{"references":["aws_s3_bucket.this.arn","aws_s3_bucket.this"]}},"bucket_name":{"expression":{"references":["aws_s3_bucket.this.bucket","aws_s3_bucket.this"]}}},"resources":[{"address":"aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.bucket_name"]},"force_destroy":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.this","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.this","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"versioning_configuration":[{"status":{"references":["var.enable_versioning"]}}]},"schema_version":0}],"variables":{"bucket_name":{"description":"Name of the S3 bucket"},"bucket_type":{"description":"Purpose of the bucket: raw | curated | athena-results"},"enable_versioning":{"default":false,"description":"Enable versioning (true for raw buckets)"}}}},"curated_bucket":{"source":"./etl_components/etl_s3_bucket","expressions":{"bucket_name":{"references":["var.project_name"]},"bucket_type":{"constant_value":"curated"}},"module":{"outputs":{"bucket_arn":{"expression":{"references":["aws_s3_bucket.this.arn","aws_s3_bucket.this"]}},"bucket_name":{"expression":{"references":["aws_s3_bucket.this.bucket","aws_s3_bucket.this"]}}},"resources":[{"address":"aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.bucket_name"]},"force_destroy":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.this","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.this","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"versioning_configuration":[{"status":{"references":["var.enable_versioning"]}}]},"schema_version":0}],"variables":{"bucket_name":{"description":"Name of the S3 bucket"},"bucket_type":{"description":"Purpose of the bucket: raw | curated | athena-results"},"enable_versioning":{"default":false,"description":"Enable versioning (true for raw buckets)"}}}},"etl_lambda":{"source":"./etl_components/etl_lambda","expressions":{"curated_bucket_name":{"references":["module.curated_bucket.bucket_name","module.curated_bucket"]},"curated_prefix":{"references":["var.schema_version"]},"handler":{"constant_value":"flatten.lambda_handler"},"lambda_name":{"references":["var.project_name"]},"package_path":{"constant_value":"etl.zip"},"raw_bucket_name":{"references":["module.raw_bucket.bucket_name","module.raw_bucket"]},"role_arn":{"references":["module.iam.lambda_role_arn","module.iam"]},"schema_version":{"references":["var.schema_version"]}},"module":{"outputs":{"lambda_arn":{"expression":{"references":["aws_lambda_function.this.arn","aws_lambda_function.this"]}},"lambda_name":{"expression":{"references":["aws_lambda_function.this.function_name","aws_lambda_function.this"]}}},"resources":[{"address":"aws_cloudwatch_log_group.this","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.lambda_name"]},"retention_in_days":{"references":["var.log_retention_days"]}},"schema_version":0},{"address":"aws_lambda_function.this","mode":"managed","type":"aws_lambda_function","name":"this","provider_config_key":"aws","expressions":{"environment":[{"variables":{"references":["var.raw_bucket_name","var.curated_bucket_name","var.curated_prefix","var.schema_version"]}}],"filename":{"references":["var.package_path"]},"function_name":{"references":["var.lambda_name"]},"handler":{"references":["var.handler"]},"memory_size":{"references":["var.memory_size"]},"role":{"references":["var.role_arn"]},"runtime":{"references":["var.runtime"]},"source_code_hash":{"references":["var.package_path"]},"timeout":{"references":["var.timeout"]}},"schema_version":0,"depends_on":["aws_cloudwatch_log_group.this"]},{"address":"aws_lambda_permission.allow_s3_invoke","mode":"managed","type":"aws_lambda_permission","name":"allow_s3_invoke","provider_config_key":"aws","expressions":{"action":{"constant_value":"lambda:InvokeFunction"},"function_name":{"references":["aws_lambda_function.this.function_name","aws_lambda_function.this"]},"principal":{"constant_value":"s3.amazonaws.com"},"statement_id":{"constant_value":"AllowExecutionFromS3"}},"schema_version":0}],"variables":{"curated_bucket_name":{"description":"S3 bucket containing curated Parquet output data"},"curated_prefix":{"description":"Prefix under curated bucket where Parquet is written"},"handler":{"description":"Lambda handler"},"lambda_name":{"description":"Name of the ETL lambda function"},"log_retention_days":{"default":14,"description":"CloudWatch log retention in days"},"memory_size":{"default":1024,"description":"Lambda memory size in MB"},"package_path":{"description":"Path to lambda deployment package (zip)"},"raw_bucket_name":{"description":"S3 bucket containing raw JSON data"},"role_arn":{"description":"IAM role ARN assumed by the Lambda"},"runtime":{"default":"python3.11","description":"Lambda runtime"},"schema_version":{"description":"Schema version used by this Lambda"},"timeout":{"default":300,"description":"Lambda timeout in seconds"}}}},"glue_catalog":{"source":"./etl_components/etl_glue_catalog","expressions":{"crawler_name":{"references":["var.project_name"]},"curated_bucket_name":{"references":["module.curated_bucket.bucket_name","module.curated_bucket"]},"curated_prefix":{"references":["var.schema_version"]},"database_name":{"references":["var.project_name"]},"glue_role_arn":{"references":["module.iam.glue_role_arn","module.iam"]},"table_prefix":{"constant_value":"dataset_"}},"module":{"outputs":{"crawler_name":{"expression":{"references":["aws_glue_crawler.this.name","aws_glue_crawler.this"]}},"database_name":{"expression":{"references":["aws_glue_catalog_database.this.name","aws_glue_catalog_database.this"]}}},"resources":[{"address":"aws_glue_catalog_database.this","mode":"managed","type":"aws_glue_catalog_database","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.database_name"]}},"schema_version":0},{"address":"aws_glue_crawler.this","mode":"managed","type":"aws_glue_crawler","name":"this","provider_config_key":"aws","expressions":{"database_name":{"references":["aws_glue_catalog_database.this.name","aws_glue_catalog_database.this"]},"name":{"references":["var.crawler_name"]},"recrawl_policy":[{"recrawl_behavior":{"constant_value":"CRAWL_EVERYTHING"}}],"role":{"references":["var.glue_role_arn"]},"s3_target":[{"path":{"references":["var.curated_bucket_name","var.curated_prefix"]}}],"schema_change_policy":[{"delete_behavior":{"constant_value":"LOG"},"update_behavior":{"constant_value":"LOG"}}],"table_prefix":{"references":["var.table_prefix"]}},"schema_version":0}],"variables":{"crawler_name":{"description":"Glue crawler name"},"curated_bucket_name":{"description":"S3 bucket containing curated Parquet data"},"curated_prefix":{"description":"S3 prefix under curated bucket to crawl"},"database_name":{"description":"Glue database name"},"glue_role_arn":{"description":"IAM role assumed by Glue crawler"},"table_prefix":{"description":"Prefix prepended to tables created by the crawler"}}}},"iam":{"source":"./etl_components/etl_iam","expressions":{"athena_results_bucket_arn":{"references":["module.athena_results_bucket.bucket_arn","module.athena_results_bucket"]},"curated_bucket_arn":{"references":["module.curated_bucket.bucket_arn","module.curated_bucket"]},"raw_bucket_arn":{"references":["module.raw_bucket.bucket_arn","module.raw_bucket"]}},"module":{"outputs":{"athena_role_arn":{"expression":{"references":["aws_iam_role.athena_role.arn","aws_iam_role.athena_role"]}},"glue_role_arn":{"expression":{"references":["aws_iam_role.glue_role.arn","aws_iam_role.glue_role"]}},"lambda_role_arn":{"expression":{"references":["aws_iam_role.lambda_role.arn","aws_iam_role.lambda_role"]}}},"resources":[{"address":"aws_iam_policy.athena_policy","mode":"managed","type":"aws_iam_policy","name":"athena_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"athena-query-policy"},"policy":{"references":["var.curated_bucket_arn","var.curated_bucket_arn","var.athena_results_bucket_arn"]}},"schema_version":0},{"address":"aws_iam_policy.glue_policy","mode":"managed","type":"aws_iam_policy","name":"glue_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"glue-crawler-policy"},"policy":{"references":["var.curated_bucket_arn","var.curated_bucket_arn"]}},"schema_version":0},{"address":"aws_iam_policy.lambda_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"etl-lambda-policy"},"policy":{"references":["var.raw_bucket_arn","var.curated_bucket_arn"]}},"schema_version":0},{"address":"aws_iam_role.athena_role","mode":"managed","type":"aws_iam_role","name":"athena_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"athena-query-role"}},"schema_version":0},{"address":"aws_iam_role.glue_role","mode":"managed","type":"aws_iam_role","name":"glue_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"glue-crawler-role"}},"schema_version":0},{"address":"aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"etl-lambda-role"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.athena_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"athena_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.athena_policy.arn","aws_iam_policy.athena_policy"]},"role":{"references":["aws_iam_role.athena_role.name","aws_iam_role.athena_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.glue_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"glue_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.glue_policy.arn","aws_iam_policy.glue_policy"]},"role":{"references":["aws_iam_role.glue_role.name","aws_iam_role.glue_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.lambda_policy.arn","aws_iam_policy.lambda_policy"]},"role":{"references":["aws_iam_role.lambda_role.name","aws_iam_role.lambda_role"]}},"schema_version":0}],"variables":{"athena_results_bucket_arn":{"description":"ARN of the Athena results bucket"},"curated_bucket_arn":{"description":"ARN of the curated Parquet S3 bucket"},"raw_bucket_arn":{"description":"ARN of the raw JSON S3 bucket"}}}},"raw_bucket":{"source":"./etl_components/etl_s3_bucket","expressions":{"bucket_name":{"references":["var.project_name"]},"bucket_type":{"constant_value":"raw"},"enable_versioning":{"constant_value":true}},"module":{"outputs":{"bucket_arn":{"expression":{"references":["aws_s3_bucket.this.arn","aws_s3_bucket.this"]}},"bucket_name":{"expression":{"references":["aws_s3_bucket.this.bucket","aws_s3_bucket.this"]}}},"resources":[{"address":"aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.bucket_name"]},"force_destroy":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.this","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.this","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"versioning_configuration":[{"status":{"references":["var.enable_versioning"]}}]},"schema_version":0}],"variables":{"bucket_name":{"description":"Name of the S3 bucket"},"bucket_type":{"description":"Purpose of the bucket: raw | curated | athena-results"},"enable_versioning":{"default":false,"description":"Enable versioning (true for raw buckets)"}}}}},"variables":{"aws_region":{"default":"ap-south-1"},"project_name":{},"schema_version":{}}}},"relevant_attributes":[{"resource":"module.iam.aws_iam_policy.athena_policy","attribute":["arn"]},{"resource":"module.iam.aws_iam_role.glue_role","attribute":["name"]},{"resource":"module.iam.aws_iam_role.lambda_role","attribute":["name"]},{"resource":"module.glue_catalog.aws_glue_catalog_database.this","attribute":["name"]},{"resource":"module.iam.aws_iam_role.athena_role","attribute":["name"]},{"resource":"module.iam.aws_iam_policy.lambda_policy","attribute":["arn"]},{"resource":"module.iam.aws_iam_role.lambda_role","attribute":["arn"]},{"resource":"module.athena_results_bucket.aws_s3_bucket.this","attribute":["arn"]},{"resource":"module.raw_bucket.aws_s3_bucket.this","attribute":["bucket"]},{"resource":"module.curated_bucket.aws_s3_bucket.this","attribute":["id"]},{"resource":"module.iam.aws_iam_policy.glue_policy","attribute":["arn"]},{"resource":"module.iam.aws_iam_role.athena_role","attribute":["arn"]},{"resource":"module.athena_results_bucket.aws_s3_bucket.this","attribute":["id"]},{"resource":"module.glue_catalog.aws_glue_crawler.this","attribute":["name"]},{"resource":"module.iam.aws_iam_role.glue_role","attribute":["arn"]},{"resource":"module.curated_bucket.aws_s3_bucket.this","attribute":["arn"]},{"resource":"module.curated_bucket.aws_s3_bucket.this","attribute":["bucket"]},{"resource":"module.athena.aws_athena_workgroup.this","attribute":["name"]},{"resource":"module.athena_results_bucket.aws_s3_bucket.this","attribute":["bucket"]},{"resource":"module.raw_bucket.aws_s3_bucket.this","attribute":["arn"]},{"resource":"module.raw_bucket.aws_s3_bucket.this","attribute":["id"]}],"checks":[{"address":{"kind":"var","module":"module.athena_results_bucket","name":"bucket_type","to_display":"module.athena_results_bucket.var.bucket_type"},"status":"pass","instances":[{"address":{"module":"module.athena_results_bucket","to_display":"module.athena_results_bucket.var.bucket_type"},"status":"pass"}]},{"address":{"kind":"var","module":"module.curated_bucket","name":"bucket_type","to_display":"module.curated_bucket.var.bucket_type"},"status":"pass","instances":[{"address":{"module":"module.curated_bucket","to_display":"module.curated_bucket.var.bucket_type"},"status":"pass"}]},{"address":{"kind":"var","module":"module.raw_bucket","name":"bucket_type","to_display":"module.raw_bucket.var.bucket_type"},"status":"pass","instances":[{"address":{"module":"module.raw_bucket","to_display":"module.raw_bucket.var.bucket_type"},"status":"pass"}]}],"timestamp":"2026-02-08T10:37:11Z","applyable":false,"complete":false,"errored":true}
