{
  "format_version": "1.2",
  "terraform_version": "1.7.0",
  "timestamp": "2024-02-08T10:00:00Z",
  "resource_changes": [
    {
      "address": "aws_db_instance.production_main",
      "type": "aws_db_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "identifier": "production-db-main",
          "engine": "postgres",
          "engine_version": "14.0",
          "instance_class": "db.r5.xlarge",
          "allocated_storage": 100,
          "storage_encrypted": true
        },
        "after": null
      }
    },
    {
      "address": "aws_s3_bucket.data_lake",
      "type": "aws_s3_bucket",
      "change": {
        "actions": ["delete", "create"],
        "before": {
          "bucket": "company-data-lake-prod",
          "acl": "private"
        },
        "after": {
          "bucket": "company-data-lake-prod-v2",
          "acl": "private"
        }
      }
    },
    {
      "address": "aws_kms_key.main",
      "type": "aws_kms_key",
      "change": {
        "actions": ["delete"],
        "before": {
          "description": "Main encryption key",
          "deletion_window_in_days": 30,
          "enable_key_rotation": true
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[0]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[1]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[2]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[3]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[4]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[5]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[6]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[7]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[8]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[9]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[10]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_instance.worker[11]",
      "type": "aws_instance",
      "change": {
        "actions": ["delete"],
        "before": {
          "ami": "ami-12345678",
          "instance_type": "m5.large"
        },
        "after": null
      }
    },
    {
      "address": "aws_dynamodb_table.users",
      "type": "aws_dynamodb_table",
      "change": {
        "actions": ["delete"],
        "before": {
          "name": "users",
          "billing_mode": "PAY_PER_REQUEST",
          "hash_key": "id"
        },
        "after": null
      }
    },
    {
      "address": "aws_rds_cluster.aurora",
      "type": "aws_rds_cluster",
      "change": {
        "actions": ["delete", "create"],
        "before": {
          "cluster_identifier": "aurora-cluster",
          "engine": "aurora-postgresql"
        },
        "after": {
          "cluster_identifier": "aurora-cluster-v2",
          "engine": "aurora-postgresql"
        }
      }
    },
    {
      "address": "aws_instance.new_worker[0]",
      "type": "aws_instance",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "ami": "ami-87654321",
          "instance_type": "m5.xlarge",
          "tags": {
            "Name": "new-worker-1"
          }
        }
      }
    },
    {
      "address": "aws_instance.new_worker[1]",
      "type": "aws_instance",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "ami": "ami-87654321",
          "instance_type": "m5.xlarge",
          "tags": {
            "Name": "new-worker-2"
          }
        }
      }
    },
    {
      "address": "aws_security_group_rule.dangerous",
      "type": "aws_security_group_rule",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "type": "ingress",
          "from_port": 0,
          "to_port": 65535,
          "protocol": "tcp",
          "cidr_blocks": ["0.0.0.0/0"],
          "security_group_id": "sg-12345678"
        }
      }
    },
    {
      "address": "aws_nat_gateway.nat[0]",
      "type": "aws_nat_gateway",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "allocation_id": "eipalloc-12345678",
          "subnet_id": "subnet-12345678"
        }
      }
    },
    {
      "address": "aws_nat_gateway.nat[1]",
      "type": "aws_nat_gateway",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "allocation_id": "eipalloc-87654321",
          "subnet_id": "subnet-87654321"
        }
      }
    },
    {
      "address": "aws_nat_gateway.nat[2]",
      "type": "aws_nat_gateway",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "allocation_id": "eipalloc-abc12345",
          "subnet_id": "subnet-abc12345"
        }
      }
    }
  ]
}
